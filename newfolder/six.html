<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Smooth Flower-Pot Card Blast</title>
<style>
body {
    background: #111;
    overflow: hidden;
    margin: 0;
    font-family: Arial;
}

#scatterBtn {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    padding: 12px 25px;
    font-size: 20px;
    background: linear-gradient(45deg, #00eaff, #ff00e0);
    color: white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    z-index: 1000;
}

.card {
    width: 80px;
    height: 120px;
    position: absolute;
    transform-origin: center;
    perspective: 800px;
}

.card-inner {
    width: 100%;
    height: 100%;
    position: relative;
    transform-style: preserve-3d;
    transition: transform 0.8s cubic-bezier(.25,.8,.25,1);
    border-radius: 10px;
}

.card.flip .card-inner {
    transform: rotateY(180deg);
}

.card-front, .card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 10px;
    backface-visibility: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 30px;
    font-weight: bold;
    box-shadow: 0 0 15px #00eaff, 0 0 30px #ff00e0;
}

.card-front { background: white; color: black; }
.card-back  { background: #222; color: white; transform: rotateY(180deg); }

.particle {
    position: absolute;
    width: 4px;
    height: 4px;
    border-radius: 50%;
    pointer-events: none;
}
</style>
</head>
<body>

<button id="scatterBtn">üí® Blast Cards üí®</button>

<script>
    let progress = 0; // add this outside animate()

const cardFaces = ["A‚ô†","K‚ô•","Q‚ô¶","J‚ô£","10‚ô†","9‚ô•","8‚ô¶","7‚ô£","A‚ô¶","K‚ô£"];

function createParticle(x, y, color){
    const p = document.createElement('div');
    p.className = 'particle';
    p.style.left = x + 'px';
    p.style.top = y + 'px';
    p.style.background = color;
    document.body.appendChild(p);

    let dx = (Math.random()-0.5)*4;
    let dy = (Math.random()-0.5)*4;
    let life = 20;
    function animateParticle(){
        if(life-- > 0){
            p.style.left = (parseFloat(p.style.left)+dx) + 'px';
            p.style.top = (parseFloat(p.style.top)+dy) + 'px';
            p.style.opacity = life/20;
            requestAnimationFrame(animateParticle);
        } else p.remove();
    }
    animateParticle();
}

// Cubic ease-out for smooth rise
function easeOutCubic(t){ return 1 - Math.pow(1-t,3); }

document.getElementById("scatterBtn").addEventListener("click", () => {
    for(let i=0; i<30; i++){
        createBlastCard();
    }
});

function createBlastCard(){
    const card = document.createElement('div');
    card.className = 'card';

    const inner = document.createElement('div');
    inner.className = 'card-inner';

    const front = document.createElement('div');
    front.className = 'card-front';
    front.textContent = cardFaces[Math.floor(Math.random()*cardFaces.length)];

    const back = document.createElement('div');
    back.className = 'card-back';
    back.textContent = "üÇ†";

    inner.appendChild(front);
    inner.appendChild(back);
    card.appendChild(inner);
    document.body.appendChild(card);

    // Bottom-center spawn
    let startX = window.innerWidth/2 - 40;
    let startY = window.innerHeight - 130;
    card.style.left = startX + 'px';
    card.style.top = startY + 'px';

    // Flip effect
    setTimeout(()=> inner.classList.add('flip'), Math.random()*200);

    // Apex
    let apexY = window.innerHeight*0.25;

    // Blast parameters
    let phase = "rise";
    let velocityX = 0;
    let velocityY = 0;
    let gravity = 0.5;
    let rotation = 0;
    let rotationSpeed = Math.random()*15-7.5;
    let color = `hsl(${Math.random()*360},80%,60%)`;

    // Radial blast angle
    let blastSpeed = 5 + Math.random()*3;
    let blastAngle = Math.random()*Math.PI*2;

    // For smooth rise
    let riseStartY = startY;

   function animate(){
if (phase === "rise") {
    progress += 0.005;  // << speed control (0.005 = slow & smooth)

    if (progress >= 1) {
        progress = 1;
        startY = apexY;
        phase = "blast";
        velocityX = blastSpeed * Math.cos(blastAngle);
        velocityY = blastSpeed * Math.sin(blastAngle);
    } else {
        startY = riseStartY - easeOutCubic(progress) * (riseStartY - apexY);
    }
}
  else {
        velocityY += gravity*0.5;
        startX += velocityX;
        startY += velocityY;
        rotation += rotationSpeed;
    }

    card.style.left = startX + 'px';
    card.style.top = startY + 'px';
    card.style.transform = `rotate(${rotation}deg)`;

    createParticle(startX+40, startY+60, color);

    // ‚ùå yaha double call tha
    if(startY > window.innerHeight + 150 || startX < -100 || startX > window.innerWidth + 100){
        card.remove();
        return;   // ‚Üê ye bhi add kar do
    }

    requestAnimationFrame(animate); // ‚úîÔ∏è single call
}

    animate();
}
</script>

</body>
</html>
